import{W as d}from"./wizard-Db9wGhpc.js";import{_ as p,i as m,o as r,w as h,d as u,a,k as i,c,g as f,v as n}from"./index-DMrXkXeN.js";import"./Logo-C5-FioId.js";const w={inject:["apiBase","apiFetch","reloadUser"],components:{Wizard:d},data:()=>({email:"",password:"",health:{},error:!1}),async created(){this.health=await this.getHealth()},methods:{async getHealth(){return(await fetch(`${this.apiBase}/api/v1/health`)).json()},async submit(){const t=await fetch(`${this.apiBase}/api/v1/auth/login`,{method:"POST",body:JSON.stringify({email:this.email,password:this.password})});if(t.ok){const e=await t.json();localStorage.setItem("tokens",JSON.stringify(e)),this.reloadUser(),this.$router.push("/")}else this.error=!0}}},g={key:0};function k(t,e,v,y,B,o){const l=u("Wizard");return r(),m(l,{steps:[],maxWidth:"400px"},{default:h(()=>[e[3]||(e[3]=a("h1",null,"Login",-1)),i(a("input",{placeholder:"Eamil","onUpdate:modelValue":e[0]||(e[0]=s=>t.email=s)},null,512),[[n,t.email]]),i(a("input",{placeholder:"Password",type:"password","onUpdate:modelValue":e[1]||(e[1]=s=>t.password=s)},null,512),[[n,t.password]]),a("button",{onClick:e[2]||(e[2]=(...s)=>o.submit&&o.submit(...s))},"Login"),t.error?(r(),c("div",g," Invalid credentials ")):f("",!0)]),_:1})}const C=p(w,[["render",k],["__scopeId","data-v-b2ae6141"]]);export{C as default};
